name: í…ŒìŠ¤íŠ¸

# .changeset, packages ë””ë ‰í† ë¦¬ì˜ ë³€ê²½ì‚¬í•­ë“¤ì´ main ë¸Œë Œì¹˜ì— pushë ë•Œ ì´ë²¤íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤. 
on:
  push:
    branches:
      - test

jobs:
  set_env:
    name: Changesets RUN
    runs-on: ubuntu-latest
    outputs:
      version: ${{ steps.version.outputs.result }}
    steps:
      - name: Checkout branch
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
      # package.jsonì˜ ë²„ì „ì„ ê°€ì ¸ì˜¨ë‹¤.
      - name: package.jsonì—ì„œ ë²„ì „ ê°€ì ¸ì˜¤ê¸°
        id: version
        run: |
          result=$(make get_version | tail -1)
          echo "version=$result" >> "$GITHUB_OUTPUT"
  release:
    name: ğŸš€ ë¦´ë¦¬ì¦ˆ
    runs-on: ubuntu-latest
    needs: [set_env]
    env:
      version: ${{ needs.set_env.outputs.version }}
    steps:
      - name: Release ìƒì„±
        id: create_release
        uses: actions/create-release@v1
        env: 
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with: 
          tag_name: ${{ needs.set_env.outputs.version }}
          release_name: ${{ needs.set_env.outputs.version }}
          body: |
            ${{ needs.set_env.outputs.version }} ë¦´ë¦¬ì¦ˆ
            NPM: https://www.npmjs.com/package/@hyeon/eslint-config/v/${{ needs.set_env.outputs.version }}